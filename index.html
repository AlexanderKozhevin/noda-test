<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>colorize.cc OS — XR Mind Map</title>

  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <link rel="stylesheet" href="css/styles.css">
  <script type="module" src="js/app.js"></script>
</head>

<body>
  <!-- Desktop helper (auto-hides in VR) -->
  <!-- <div id="hud">
    <h3>colorize.cc OS — XR Mind Map</h3>
    <div class="row">
      <div class="pill">Left stick: move • Right stick: turn</div>
      <div class="pill">Trigger: select • Grip: move node • A: add • B: delete • Y: link • X: rename</div>
      <div class="pill">Hold BOTH grips: move/rotate/zoom whole graph</div>
      <div style="display:flex; gap:8px;">
        <button id="toggleJson">JSON</button>
        <button id="applyJson">Apply</button>
        <button id="exportJson">Export</button>
      </div>
    </div>
    <textarea id="jsonBox" spellcheck="false"></textarea>
    <small>Tip: For best feel, keep movement rig-relative (this build). Turning your head won't invert movement.</small>
  </div> -->

  <!-- JSON definition -->
  <script type="application/json" id="mindmap-json">
  {
    "nodes": [
      { "id": "core", "label": "Core", "pos": [0, 1.6, -2.8], "color": "#00F0FF", "size": 0.18 },
      { "id": "ux",   "label": "UX",   "pos": [-1.4, 1.55, -3.6], "color": "#7CFF6B", "size": 0.16 },
      { "id": "ml",   "label": "ML",   "pos": [1.6, 1.75, -3.7], "color": "#FF4FD8", "size": 0.16 },
      { "id": "api",  "label": "API",  "pos": [0.0, 1.15, -4.6], "color": "#FFD24D", "size": 0.15 }
    ],
    "links": [
      { "from": "core", "to": "ux",  "color": "#00F0FF", "thickness": 0.012 },
      { "from": "core", "to": "ml",  "color": "#00F0FF", "thickness": 0.012 },
      { "from": "core", "to": "api", "color": "#00F0FF", "thickness": 0.012 }
    ]
  }
  </script>

  <a-scene
    id="scene"
    background="color: #050510"
    renderer="antialias: true; colorManagement: true; physicallyCorrectLights: true;"
    fog="type: exponential; color: #050510; density: 0.018"
    xr-mode-ui="enabled: true">

    <!-- Lights -->
    <a-entity light="type: ambient; intensity: 0.28; color: #7fdcff"></a-entity>
    <a-entity light="type: directional; intensity: 0.62; color: #ffffff" position="-1 3 1"></a-entity>
    <a-entity light="type: point; intensity: 0.35; distance: 20; color: #00F0FF" position="0 4 -4"></a-entity>

    <!-- Big rectangular room -->
    <a-entity id="room">
      <a-plane id="floor" class="surface hitSurface"
        rotation="-90 0 0" width="60" height="60"
        material="shader: standard; color: #07070d; metalness: 0.15; roughness: 0.9"
        procedural-grid="size: 60; lines: 90; majorEvery: 6; minorColor: rgba(0,240,255,0.06); majorColor: rgba(0,240,255,0.15)">
      </a-plane>

      <!-- Back wall -->
      <a-plane class="surface hitSurface"
        position="0 4 -20" width="60" height="12"
        material="shader: standard; color:#060612; metalness:0.28; roughness:0.7; emissive:#020218; emissiveIntensity:0.55">
      </a-plane>

      <!-- Side walls -->
      <a-plane class="surface hitSurface"
        position="-30 4 0" rotation="0 90 0" width="40" height="12"
        material="shader: standard; color:#060612; metalness:0.20; roughness:0.75; emissive:#010115; emissiveIntensity:0.35; opacity:0.95; transparent:true">
      </a-plane>

      <a-plane class="surface hitSurface"
        position="30 4 0" rotation="0 -90 0" width="40" height="12"
        material="shader: standard; color:#060612; metalness:0.20; roughness:0.75; emissive:#010115; emissiveIntensity:0.35; opacity:0.95; transparent:true">
      </a-plane>

      <!-- Neon title block -->
      <a-entity position="0 6.3 -19.4">
        <a-text value="colorize.cc OS" align="center" width="10" color="#8ff0ff" opacity="0.98"></a-text>
        <a-plane position="0 -0.15 -0.02" width="9.2" height="1.3"
          material="shader: standard; color:#00131a; emissive:#00F0FF; emissiveIntensity:0.65; opacity:0.30; transparent:true; roughness:1.0; metalness:0.0">
        </a-plane>
        <a-entity neon-frame="w: 13.5; h: 3.6; color: #00F0FF" position="0 -0.2 0"></a-entity>
      </a-entity>
    </a-entity>

    <!-- Workspace (entire graph lives here; we scale/rotate/move THIS) -->
    <a-entity id="workspace" position="0 0 0" rotation="0 0 0" scale="1 1 1">
      <a-entity id="mindmapRoot" mindmap="src: #mindmap-json;"></a-entity>
    </a-entity>

    <!-- Selection ring -->
    <a-entity id="selectionRing" visible="false" selection-ring></a-entity>

    <!-- VR Keyboard -->
    <a-entity id="vrKeyboard" visible="false" vr-keyboard></a-entity>

    <!-- Player rig -->
    <a-entity id="rig" position="0 0 10"
      locomotion-rig="leftHand: #leftHand; rightHand: #rightHand; moveSpeed: 2.6; turnSpeed: 78; deadzone: 0.18;"
      mind-controls="leftHand: #leftHand; rightHand: #rightHand; workspace: #workspace; root: #mindmapRoot; ring: #selectionRing; keyboard: #vrKeyboard;">

      <a-entity id="camera"
        camera
        position="0 1.6 0"
        look-controls="pointerLockEnabled: false"
        wasd-controls="acceleration: 26">
      </a-entity>

      <a-entity id="leftHand"
        oculus-touch-controls="hand: left"
        raycaster="objects: .hitNode, .hitUI, .hitSurface; far: 35; interval: 0"
        line="color: #00F0FF; opacity: 0.55">
      </a-entity>

      <a-entity id="rightHand"
        oculus-touch-controls="hand: right"
        raycaster="objects: .hitNode, .hitUI, .hitSurface; far: 35; interval: 0"
        line="color: #FF4FD8; opacity: 0.55">
      </a-entity>
    </a-entity>
  </a-scene>
</body>
</html>
